function t(t,e,n,r,o){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:o;return t===o?n:t}var e="undefined"!=typeof window;function n(t){return"function"==typeof t}function r(t){return"string"==typeof t}function o(t){return void 0===t}function i(t){return"boolean"==typeof t}function a(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function u(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function c(t){return function(t){for(var e,n=Object.create(null),r=/([^&=]+)=?([^&]*)/g;e=r.exec(t);){var o=u(e[1]),i=u(e[2]);"[]"===o.substring(o.length-2)?(n[o=o.substring(0,o.length-2)]||(n[o]=[])).push(i):n[o]=""===i||i}for(var a in n){var c=a.split("[");c.length>1&&(s(n,c.map((function(t){return t.replace(/[?[\]\\ ]/g,"")})),n[a]),delete n[a])}return n}(function(t){if(t){var n=t.match(/\?(.*)/);return n&&n[1]?n[1].split("#")[0]:""}return e&&window.location.search.substring(1)}(t))}function s(t,e,n){for(var r=e.length-1,o=0;o<r;++o){var i=e[o];if("__proto__"===i||"constructor"===i)break;i in t||(t[i]={}),t=t[i]}t[e[r]]=n}function l(){for(var t="",e=0,n=4294967295*Math.random()|0;e++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[e-1],o=15&n;t+="-"==r||"4"==r?r:("x"==r?o:3&o|8).toString(16),n=e%8==0?4294967295*Math.random()|0:n>>4}return t}var f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,p="undefined";function d(t){return f[t]}function h(t,e){return f[t]=e,e}function g(t){h(t)}var y=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}};var v=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var m=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var b=function(t){return y(t)||v(t)||m()};function w(t,e){return t(e={exports:{}},e.exports),e.exports}var x=w((function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(r){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},n(r)}t.exports=n})),S=w((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(A){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new _(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return N()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=O(a,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",g={};function y(){}function v(){}function m(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==n&&r.call(x,i)&&(b=x);var S=m.prototype=y.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:e,done:!0}}return v.prototype=S.constructor=m,m.constructor=v,v.displayName=c(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(I.prototype),I.prototype[a]=function(){return this},t.AsyncIterator=I,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new I(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(S),c(S,u,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=j,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(n){Function("r","regeneratorRuntime = r")(e)}}));function E(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(r,o)}var I=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){E(i,r,o,a,u,"next",t)}function u(t){E(i,r,o,a,u,"throw",t)}a(void 0)}))}};var O=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var P=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(n,!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},_="function",j="undefined",N="@@redux/"+Math.random().toString(36),A=function(){return("undefined"==typeof Symbol?"undefined":x(Symbol))===_&&Symbol.observable||"@@observable"}(),T=" != "+_;function L(t,e,n){if(x(e)===_&&x(n)===j&&(n=e,e=void 0),x(n)!==j){if(x(n)!==_)throw new Error("enhancer"+T);return n(L)(t,e)}if(x(t)!==_)throw new Error("reducer"+T);var r=t,o=e,i=[],u=i,c=!1;function s(){u===i&&(u=i.slice())}function l(){return o}function f(t){if(x(t)!==_)throw new Error("Listener"+T);var e=!0;return s(),u.push(t),function(){if(e){e=!1,s();var n=u.indexOf(t);u.splice(n,1)}}}function p(t){if(!a(t))throw new Error("Act != obj");if(x(t.type)===j)throw new Error("ActType "+j);if(c)throw new Error("Dispatch in reducer");try{c=!0,o=r(o,t)}finally{c=!1}for(var e=i=u,n=0;n<e.length;n++){(0,e[n])()}return t}return p({type:"@@redux/INIT"}),O({dispatch:p,subscribe:f,getState:l,replaceReducer:function(t){if(x(t)!==_)throw new Error("next reducer"+T);r=t,p({type:"@@redux/INIT"})}},A,(function(){var t=f;return O({subscribe:function(e){if("object"!==x(e))throw new TypeError("Observer != obj");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}},A,(function(){return this}))}))}function z(t,e){var n=e&&e.type;return"action "+(n&&n.toString()||"?")+"reducer "+t+" returns "+j}function M(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];x(t[o])===_&&(n[o]=t[o])}var i,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e],r=n(void 0,{type:"@@redux/INIT"});if(x(r)===j||x(n(void 0,{type:N}))===j)throw new Error("reducer "+e+" "+j)}))}(n)}catch(u){i=u}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(i)throw i;for(var r=!1,o={},u=0;u<a.length;u++){var c=a[u],s=n[c],l=t[c],f=s(l,e);if(x(f)===j){var p=z(c,e);throw new Error(p)}o[c]=f,r=r||f!==l}return r?o:t}}function D(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function U(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,o){var i,a=t(n,r,o),u=a.dispatch,c={getState:a.getState,dispatch:function(t){return u(t)}};return i=e.map((function(t){return t(c)})),u=D.apply(void 0,b(i))(a.dispatch),P(P({},a),{},{dispatch:u})}}}var C="userId",q="anonymousId",R="__anon_id",V="__user_id",F="__user_traits",G=Object.freeze({ANON_ID:R,USER_ID:V,USER_TRAITS:F}),$=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],B=["name","EVENTS","config","loaded"],J=$.reduce((function(t,e){return t[e]=e,t}),{registerPluginType:function(t){return"registerPlugin:".concat(t)},pluginReadyType:function(t){return"ready:".concat(t)}});function X(t){return $.includes(t)}var W=/^utm_/,Y=/^an_prop_/,H=/^an_trait_/;function Z(t){var e=t.storage.setItem;return function(n){return function(r){return function(o){if(o.type===J.bootstrap){var i=o.params,a=o.user,u=o.persistedUser,c=o.initialUser,s=u.userId===a.userId;u.anonymousId!==a.anonymousId&&e(R,a.anonymousId),s||e(V,a.userId),c.traits&&e(F,P(P({},s&&u.traits?u.traits:{}),c.traits));var l=Object.keys(o.params);if(l.length){var f=i.an_uid,p=i.an_event,d=l.reduce((function(t,e){if(e.match(W)||e.match(/^(d|g)clid/)){var n=e.replace(W,""),r="campaign"===n?"name":n;t.campaign[r]=i[e]}return e.match(Y)&&(t.props[e.replace(Y,"")]=i[e]),e.match(H)&&(t.traits[e.replace(H,"")]=i[e]),t}),{campaign:{},props:{},traits:{}});n.dispatch(P(P({type:J.params,raw:i},d),f?{userId:f}:{})),f&&setTimeout((function(){return t.identify(f,d.traits)}),0),p&&setTimeout((function(){return t.track(p,d.props)}),0),Object.keys(d.campaign).length&&n.dispatch({type:J.campaign,campaign:d.campaign})}}return r(o)}}}}function K(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.type===J.setItemEnd){if(n.key===R)return P(P({},e),{anonymousId:n.value});if(n.key===V)return P(P({},e),{userId:n.value})}switch(n.type){case J.identify:return Object.assign({},e,{userId:n.userId,traits:P(P({},e.traits),n.traits)});case J.reset:return[V,R,F].forEach((function(e){t.removeItem(e)})),Object.assign({},e,{userId:null,anonymousId:null,traits:{}});default:return e}}}function Q(t){return{userId:t.getItem(V),anonymousId:t.getItem(R),traits:t.getItem(F)}}var tt=function(t){return"__TEMP__"+t};function et(t){return function(e,n,r){var o=n.getState("user")[e];if(o)return o;if(r&&a(r)&&r[e])return r[e];var i=Q(t)[e];return i||(d(tt(e))||null)}}function nt(t){var e=t.storage,n=e.setItem,r=e.removeItem,o=e.getItem;return function(t){return function(e){return function(i){var a=i.userId,u=i.traits,c=i.options;if(i.type===J.reset&&([V,F,R].forEach((function(t){r(t)})),[C,q,"traits"].forEach((function(t){g(tt(t))}))),i.type===J.identify){o(R)||n(R,l());var s=o(V),f=o(F)||{};s&&s!==a&&t.dispatch({type:J.userIdChanged,old:{userId:s,traits:f},new:{userId:a,traits:u},options:c}),a&&n(V,a),u&&n(F,P(P({},f),u))}return e(i)}}}}var rt={};function ot(t,e){rt[t]&&n(rt[t])&&(rt[t](e),delete rt[t])}function it(t,e,n){return new Promise((function(r,o){return e()?r(t):n<1?o(P(P({},t),{},{queue:!0})):(i=10,new Promise((function(t){return setTimeout(t,i)}))).then((function(i){return it(t,e,n-10).then(r,o)}));var i}))}function at(t,e,r){var o=e(),i=t.getState(),a=i.plugins,u=i.context,c=i.queue,s=i.user;if(!u.offline&&c&&c.actions&&c.actions.length){var l=c.actions.reduce((function(t,e,n){return a[e.plugin].loaded?(t.process.push(e),t.processIndex.push(n)):(t.requeue.push(e),t.requeueIndex.push(n)),t}),{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(l.processIndex&&l.processIndex.length){l.processIndex.forEach((function(e){var i=c.actions[e],u=i.plugin,l=i.payload.type,f=o[u][l];if(f&&n(f)){var p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[C,q].reduce((function(n,r){return t.hasOwnProperty(r)&&e[r]&&e[r]!==t[r]&&(n[r]=e[r]),n}),t)}(i.payload,s);f({payload:p,config:a[u].config,instance:r});var d="".concat(l,":").concat(u);t.dispatch(P(P({},p),{},{type:d,_:{called:d,from:"queueDrain"}}))}}));var f=c.actions.filter((function(t,e){return!~l.processIndex.indexOf(e)}));c.actions=f}}}function ut(t,e,n){return setInterval((function(){return at(t,e,n)}),3e3)}var ct=function(t){if(Array.isArray(t))return t};var st=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n};var lt=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var ft=function(t,e){return ct(t)||st(t,e)||lt()};function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(t).filter((function(t){var r=n.plugins||{};return i(r[t])?r[t]:!1!==r.all&&(!e[t]||!1!==e[t].enabled)})).map((function(e){return t[e]}))}var dt=/Start$/,ht=/^bootstrap/,gt=/^ready/;function yt(t,e,n,r,o){return vt.apply(this,arguments)}function vt(){return(vt=I(S.mark((function t(e,r,o,i,a){var u,c,s,l,f,p,d,h,g,y,v;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=n(r)?r():r,c=e.type,s=c.replace(dt,""),!e._||!e._.called){t.next=5;break}return t.abrupt("return",e);case 5:return l=o.getState(),f=pt(u,l.plugins,e.options),c===J.initializeStart&&e.fromEnable&&(f=Object.keys(l.plugins).filter((function(t){var n=l.plugins[t];return e.plugins.includes(t)&&!n.initialized})).map((function(t){return u[t]}))),p=f.map((function(t){return t.name})),d=It(c,f),t.next=12,mt({action:e,data:{exact:d.before,namespaced:d.beforeNS},state:l,allPlugins:u,allMatches:d,instance:o,store:i,EVENTS:a});case 12:if(!kt(h=t.sent,p.length)){t.next=15;break}return t.abrupt("return",h);case 15:if(c!==s){t.next=19;break}g=h,t.next=22;break;case 19:return t.next=21,mt({action:P(P({},h),{},{type:s}),data:{exact:d.during,namespaced:d.duringNS},state:l,allPlugins:u,allMatches:d,instance:o,store:i,EVENTS:a});case 21:g=t.sent;case 22:if(!c.match(dt)){t.next=28;break}return y="".concat(s,"End"),t.next=26,mt({action:P(P({},g),{},{type:y}),data:{exact:d.after,namespaced:d.afterNS},state:l,allPlugins:u,allMatches:d,instance:o,store:i,EVENTS:a});case 26:(v=t.sent).meta&&v.meta.hasCallback&&ot(v.meta.rid,{payload:v});case 28:return t.abrupt("return",h);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(t){return bt.apply(this,arguments)}function bt(){return(bt=I(S.mark((function t(e){var r,o,i,u,c,s,l,f,p,d,h,g,y,v,m,b,w,x;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.data,o=e.action,i=e.instance,u=e.state,c=e.allPlugins,s=e.allMatches,l=e.store,f=e.EVENTS,p=u.plugins,d=u.context,h=o.type,g=h.match(dt),y=r.exact.map((function(t){return t.pluginName})),g&&(y=s.during.map((function(t){return t.pluginName}))),v=jt(i,y),m=r.exact.reduce((function(t,e){var n=e.pluginName,r=e.methodName,o=!1;return r.match(/^initialize/)||r.match(/^reset/)||(o=!p[n].loaded),d.offline&&r.match(/^(page|track|identify)/)&&(o=!0),t["".concat(n)]=o,t}),{}),t.next=10,r.exact.reduce(function(){var t=I(S.mark((function t(e,u,s){var l,f,d;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=u.pluginName,t.next=3,e;case 3:if(f=t.sent,!r.namespaced||!r.namespaced[l]){t.next=11;break}return t.next=7,r.namespaced[l].reduce(function(){var t=I(S.mark((function t(e,r,o){var u,s,f,d;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(t,e,n){return function(r,o){var i=n||e;return P(P({},t),{},{abort:{reason:r,plugins:o||[e],caller:h,from:i}})}},t.next=3,e;case 3:if(u=t.sent,r.method&&n(r.method)){t.next=6;break}return t.abrupt("return",u);case 6:return Nt(r.methodName,r.pluginName),t.next=9,r.method({payload:u,instance:i,abort:s(u,l,r.pluginName),config:xt(r.pluginName,p,c),plugins:p});case 9:return f=t.sent,d=a(f)?f:{},t.abrupt("return",Promise.resolve(P(P({},u),d)));case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Promise.resolve(o));case 7:d=t.sent,f[l]=d,t.next=12;break;case 11:f[l]=o;case 12:return t.abrupt("return",Promise.resolve(f));case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Promise.resolve({}));case 10:return b=t.sent,t.next=13,r.exact.reduce(function(){var t=I(S.mark((function t(e,n,o){var u,s,f,d,y,w,x,E,I,O,k,_;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r.exact.length===o+1,s=n.pluginName,f=c[s],t.next=5,e;case 5:if(d=t.sent,y=b[s]?b[s]:{},g&&(y=d),!Ot(y,s)){t.next=11;break}return wt({data:y,method:h,instance:i,pluginName:s,store:l}),t.abrupt("return",Promise.resolve(d));case 11:if(!Ot(d,s)){t.next=14;break}return u&&wt({data:d,method:h,instance:i,store:l}),t.abrupt("return",Promise.resolve(d));case 14:if(!m.hasOwnProperty(s)||!0!==m[s]){t.next=17;break}return l.dispatch({type:"queue",plugin:s,payload:y,_:{called:"queue",from:"queueMechanism"}}),t.abrupt("return",Promise.resolve(d));case 17:return w=v(b[s],c[s]),t.next=20,f[h]({abort:w.abort,payload:y,instance:i,config:xt(s,p,c),plugins:p});case 20:return x=t.sent,E=a(x)?x:{},I=P(P({},d),E),Ot(O=b[s],s)?wt({data:O,method:h,instance:i,pluginName:s,store:l}):(k="".concat(h,":").concat(s),(k.match(/:/g)||[]).length<2&&!h.match(ht)&&!h.match(gt)&&(_=g?I:y,i.dispatch(P(P({},_),{},{type:k,_:{called:k,from:"submethod"}})))),t.abrupt("return",Promise.resolve(I));case 26:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Promise.resolve(o));case 13:if(w=t.sent,h.match(dt)||h.match(/^registerPlugin/)||h.match(gt)||h.match(ht)||h.match(/^params/)||h.match(/^userIdChanged/)){t.next=21;break}if(f.plugins.includes(h),!w._||w._.originalAction!==h){t.next=18;break}return t.abrupt("return",w);case 18:x=P(P({},w),{_:{originalAction:w.type,called:w.type,from:"engineEnd"}}),kt(w,r.exact.length)&&!h.match(/End$/)&&(x=P(P({},x),{type:w.type+"Aborted"})),l.dispatch(x);case 21:return t.abrupt("return",w);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wt(t){var e=t.data,n=t.method;t.instance;var r=t.pluginName,o=n+"Aborted"+(r?":"+r:"");t.store.dispatch(P(P({},e),{},{type:o,_:{called:o,from:"abort"}}))}function xt(t,e,n){var r=e[t]||n[t];return r&&r.config?r.config:{}}function St(t,e){return e.reduce((function(e,n){return n[t]?e.concat({methodName:t,pluginName:n.name,method:n[t]}):e}),[])}function Et(t,e){var n=function(t){return t.replace(dt,"")}(t),r=e?":".concat(e):"";return["".concat(t).concat(r),"".concat(n).concat(r),"".concat(n,"End").concat(r)]}function It(t,e,n){var r=Et(t).map((function(t){return St(t,e)}));return e.reduce((function(n,r){var o=r.name,i=Et(t,o).map((function(t){return St(t,e)})),a=ft(i,3),u=a[0],c=a[1],s=a[2];return u.length&&(n.beforeNS[o]=u),c.length&&(n.duringNS[o]=c),s.length&&(n.afterNS[o]=s),n}),{before:r[0],beforeNS:{},during:r[1],duringNS:{},after:r[2],afterNS:{}})}function Ot(t,e){var n=t.abort;return!!n&&(!0===n||(_t(n,e)||n&&_t(n.plugins,e)))}function kt(t,e){var n=t.abort;if(!n)return!1;if(!0===n||r(n))return!0;var o=n.plugins;return Pt(n)&&n.length===e||Pt(o)&&o.length===e}function Pt(t){return Array.isArray(t)}function _t(t,e){return!(!t||!Pt(t))&&t.includes(e)}function jt(t,e){return function(n,r,o){var i=r.config,a=r.name,u="".concat(a,".").concat(n.type);o&&(u=o.event);var c=n.type.match(dt)?function(t,e,n,r,o){return function(i,a){var u=r?r.name:t,c=a&&Pt(a)?a:n;if(r&&(!(c=a&&Pt(a)?a:[t]).includes(t)||1!==c.length))throw new Error("Method ".concat(e," can only abort ").concat(t," plugin. ").concat(JSON.stringify(c)," input valid"));return P(P({},o),{},{abort:{reason:i,plugins:c,caller:e,_:u}})}}(a,u,e,o,n):function(t,e){return function(){throw new Error(t.type+" action not cancellable. Remove abort in "+e)}}(n,u);return{payload:Tt(n),instance:t,config:i||{},abort:c}}}function Nt(t,e){var n=At(t);if(n&&n.name===e){var r=At(n.method),o=r?"or "+r.method:"";throw new Error([e+" plugin is calling method "+t,"Plugins cant call self","Use ".concat(n.method," ").concat(o," in ").concat(e," plugin insteadof ").concat(t)].join("\n"))}}function At(t){var e=t.match(/(.*):(.*)/);return!!e&&{method:e[1],name:e[2]}}function Tt(t){return Object.keys(t).reduce((function(e,n){return"type"===n||(a(t[n])?e[n]=Object.assign({},t[n]):e[n]=t[n]),e}),{})}function Lt(t,e,n){var r={};return function(o){return function(i){return function(){var a=I(S.mark((function a(u){var c,s,l,f,p,d,h,g,y,v,m,b;return S.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=u.type,s=u.abort,l=u.plugins,f=u,!s){a.next=4;break}return a.abrupt("return",i(u));case 4:if(c===J.enablePlugin&&o.dispatch({type:J.initializeStart,plugins:l,disabled:[],fromEnable:!0,meta:u.meta}),c===J.disablePlugin&&setTimeout((function(){return ot(u.meta.rid,{payload:u})}),0),c===J.initializeEnd&&(p=e(),d=Object.keys(p),h=d.filter((function(t){return l.includes(t)})).map((function(t){return p[t]})),g=[],y=[],v=u.disabled,m=h.map((function(t){var e=t.loaded,n=t.name;return it(t,e,1e4).then((function(e){return r[n]||(o.dispatch({type:J.pluginReadyType(n),name:n,events:Object.keys(t).filter((function(t){return!B.includes(t)}))}),r[n]=!0),g=g.concat(n),t})).catch((function(t){if(t instanceof Error)throw new Error(t);return y=y.concat(t.name),t}))})),Promise.all(m).then((function(t){var e={plugins:g,failed:y,disabled:v};setTimeout((function(){d.length===m.length+v.length&&o.dispatch(P(P({},{type:J.ready}),e))}),0)}))),c===J.bootstrap){a.next=13;break}return/^ready:([^:]*)$/.test(c)&&setTimeout((function(){return at(o,e,t)}),0),a.next=11,yt(u,e,t,o,n);case 11:return b=a.sent,a.abrupt("return",i(b));case 13:return a.abrupt("return",i(f));case 14:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()}}}function zt(t){return function(e){return function(e){return function(n){var r=n.type,o=n.key,i=n.value,a=n.options;if(r===J.setItem||r===J.removeItem){if(n.abort)return e(n);r===J.setItem?t.setItem(o,i,a):t.removeItem(o,a)}return e(n)}}}}var Mt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Dt=function t(){var e=this;Mt(this,t),O(this,"before",[]),O(this,"after",[]),O(this,"addMiddleware",(function(t,n){e[n]=e[n].concat(t)})),O(this,"removeMiddleware",(function(t,n){var r=e[n].findIndex((function(e){return e===t}));-1!==r&&(e[n]=[].concat(b(e[n].slice(0,r)),b(e[n].slice(r+1))))})),O(this,"dynamicMiddlewares",(function(t){return function(n){return function(r){return function(o){var i={getState:n.getState,dispatch:function(t){return n.dispatch(t)}},a=e[t].map((function(t){return t(i)}));return D.apply(void 0,b(a))(r)(o)}}}}))};function Ut(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r={};if("initialize:aborted"===n.type)return e;if(/^registerPlugin:([^:]*)$/.test(n.type)){var o=Ct(n.type,"registerPlugin"),i=t()[o];if(!i||!o)return e;var a=n.enabled;return r[o]={enabled:a,initialized:!!a&&Boolean(!i.initialize),loaded:!!a&&Boolean(i.loaded()),config:i.config||{}},P(P({},e),r)}if(/^initialize:([^:]*)$/.test(n.type)){var u=Ct(n.type,J.initialize),c=t()[u];return c&&u?(r[u]=P(P({},e[u]),{initialized:!0,loaded:Boolean(c.loaded())}),P(P({},e),r)):e}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=P(P({},e[n.name]),{loaded:!0}),P(P({},e),r);switch(n.type){case J.disablePlugin:return P(P({},e),qt(n.plugins,!1,e));case J.enablePlugin:return P(P({},e),qt(n.plugins,!0,e));default:return e}}}function Ct(t,e){return t.substring(e.length+1,t.length)}function qt(t,e,n){return t.reduce((function(t,r){return t[r]=P(P({},n[r]),{enabled:e}),t}),n)}function Rt(t){try{return JSON.parse(JSON.stringify(t))}catch(e){}return t}var Vt={last:{},history:[]};function Ft(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.event,o=e.properties,i=e.options,a=e.meta;switch(n){case J.track:var u=Rt(P(P({event:r,properties:o},Object.keys(i).length&&{options:i}),{},{meta:a}));return P(P({},t),{last:u,history:t.history.concat(u)});default:return t}}var Gt={actions:[]};function $t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"queue":var o;return o=r&&r.type&&r.type===J.identify?[e].concat(t.actions):t.actions.concat(e),P(P({},t),{},{actions:o});case"dequeue":return[];default:return t}}var Bt=/#.*$/;function Jt(t){var e=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(t);return"/"+(e&&e[3]?e[3].split("?")[0].replace(Bt,""):"")}function Xt(t){var n=function(){if(e)for(var t,n=document.getElementsByTagName("link"),r=0;t=n[r];r++)if("canonical"===t.getAttribute("rel"))return t.getAttribute("href")}();return n?n.match(/\?/)?n:n+t:window.location.href.replace(Bt,"")}var Wt,Yt,Ht,Zt,Kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return t;var n=document,r=n.title,o=n.referrer,i=window,a=i.location,u=i.innerWidth,c=i.innerHeight,s=a.hash,l=a.search,f=Xt(l),p={title:r,url:f,path:Jt(f),hash:s,search:l,width:u,height:c};return o&&""!==o&&(p.referrer=o),P(P({},p),t)},Qt={last:{},history:[]};function te(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,e=arguments.length>1?arguments[1]:void 0,n=e.properties,r=e.options,o=e.meta;switch(e.type){case J.page:var i=Rt(P({properties:n,meta:o},Object.keys(r).length&&{options:r}));return P(P({},t),{last:i,history:t.history.concat(i)});default:return t}}Wt=function(){if(!e)return!1;var t=navigator.appVersion;return~t.indexOf("Win")?"Windows":~t.indexOf("Mac")?"MacOS":~t.indexOf("X11")?"UNIX":~t.indexOf("Linux")?"Linux":"Unknown OS"}(),Yt=e?document.referrer:null,Ht=function(){if(e){var t=navigator,n=t.languages;return t.userLanguage||(n&&n.length?n[0]:t.language)}}(),Zt=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}}();var ee={initialized:!1,sessionId:l(),app:null,version:null,debug:!1,offline:!!e&&!navigator.onLine,os:{name:Wt},userAgent:e?navigator.userAgent:"node",library:{name:"analytics",version:"0.10.13"},timezone:Zt,locale:Ht,campaign:{},referrer:Yt};function ne(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,e=arguments.length>1?arguments[1]:void 0,n=t.initialized,r=e.type,o=e.campaign;switch(r){case J.campaign:return P(P({},t),{campaign:o});case J.offline:return P(P({},t),{offline:!0});case J.online:return P(P({},t),{offline:!1});default:return n?t:P(P(P({},ee),t),{initialized:!0})}}var re=["plugins","reducers","storage"];function oe(t){return Object.keys(t).reduce((function(e,n){return re.includes(n)||(e[n]=t[n]),e}),{})}function ie(t,n,r){if(e){var o=window[(r?"add":"remove")+"EventListener"];t.split(" ").forEach((function(t){o(t,n)}))}}function ae(t){var e=ie.bind(null,"online offline",(function(e){return Promise.resolve(!navigator.onLine).then(t)}));return e(!0),function(t){return e(!1)}}function ue(){var t="__analytics__";return h(t,[]),function(t){return function(e,n,r){var o=t(e,n,r),i=o.dispatch;return Object.assign(o,{dispatch:function(t){var e=t.action||t;return f.__analytics__.push(e),i(t)}})}}}function ce(t){return function(){return D(D.apply(null,arguments),ue())}}function se(t){return t?(e=t,"[object Array]"===Object.prototype.toString.call(e)?t:[t]):[];var e}function le(t){for(var e,r=t||Array.prototype.slice.call(arguments),o=0;o<r.length;o++)if(n(r[o])){e=r[o];break}return e}function fe(){return(new Date).getTime()}function pe(t,e){return function(n){e&&e(n),t(n)}}function de(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=l();return e&&(rt[r]=pe(e,le(n))),P(P({},t),{},{rid:r,ts:fe()},e?{hasCallback:!0}:{})}function he(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.reducers||{},u=o.initialUser||{},s=(o.plugins||[]).reduce((function(t,e){if(n(e))return t.middlewares=t.middlewares.concat(e),t;if(e.NAMESPACE&&(e.name=e.NAMESPACE),!e.name)throw new Error("https://lytics.dev/errors/1");var r=e.EVENTS?Object.keys(e.EVENTS).map((function(t){return e.EVENTS[t]})):[],o=!(!1===e.enabled),i=!(e.config&&!1===e.config.enabled);t.pluginEnabled[e.name]=o&&i,delete e.enabled,e.methods&&(t.methods[e.name]=Object.keys(e.methods).reduce((function(t,n){return t[n]=vt(e.methods[n]),t}),{}),delete e.methods);var a=Object.keys(e).concat(r),u=new Set(t.events.concat(a));if(t.events=Array.from(u),t.pluginsArray=t.pluginsArray.concat(e),t.plugins[e.name])throw new Error(e.name+"AlreadyLoaded");return t.plugins[e.name]=e,t.plugins[e.name].loaded||(t.plugins[e.name].loaded=function(){return!0}),t}),{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),f=o.storage?o.storage:{getItem:d,setItem:h,removeItem:g},p=et(f),y=s.plugins,v=s.events.filter((function(t){return!B.includes(t)})).sort(),m=new Set(v.concat($).filter((function(t){return!B.includes(t)}))),w=Array.from(m).sort(),E=function(){return y},O=new Dt,k=O.addMiddleware,_=O.removeMiddleware,j=O.dynamicMiddlewares,N=function(){throw new Error("Abort disabled inListener")},A=c(),T=Q(f),z=P(P(P(P({},T),u),A.an_uid?{userId:A.an_uid}:{}),A.an_aid?{anonymousId:A.an_aid}:{});z.anonymousId||(z.anonymousId=l());var V,F,G,W=P({enable:function(t,e){return new Promise((function(n){pt.dispatch({type:J.enablePlugin,plugins:se(t),_:{originalAction:J.enablePlugin}},n,[e])}))},disable:function(t,e){return new Promise((function(n){pt.dispatch({type:J.disablePlugin,plugins:se(t),_:{originalAction:J.disablePlugin}},n,[e])}))}},s.methods),Y={identify:(G=I(S.mark((function t(e,n,o,i){var u,c,s,l,f;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r(e)?e:null,c=a(e)?e:n,s=o||{},l=Y.user(),h(tt(C),u),f=u||c.userId||p(C,Y,c),t.abrupt("return",new Promise((function(t){pt.dispatch(P({type:J.identifyStart,userId:f,traits:c||{},options:s,anonymousId:l.anonymousId},l.id&&l.id!==u&&{previousId:l.id}),t,[n,o,i])})));case 7:case"end":return t.stop()}}),t)}))),function(t,e,n,r){return G.apply(this,arguments)}),track:(F=I(S.mark((function t(e,n,o,i){var u,c,s;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((u=a(e)?e.event:e)&&r(u)){t.next=3;break}throw new Error("EventMissing");case 3:return c=a(e)?e:n||{},s=a(o)?o:{},t.abrupt("return",new Promise((function(t){pt.dispatch({type:J.trackStart,event:u,properties:c,options:s,userId:p(C,Y,n),anonymousId:p(q,Y,n)},t,[n,o,i])})));case 6:case"end":return t.stop()}}),t)}))),function(t,e,n,r){return F.apply(this,arguments)}),page:(V=I(S.mark((function t(e,n,r){var o,i;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a(e)?e:{},i=a(n)?n:{},t.abrupt("return",new Promise((function(t){pt.dispatch({type:J.pageStart,properties:Kt(o),options:i,userId:p(C,Y,o),anonymousId:p(q,Y,o)},t,[e,n,r])})));case 3:case"end":return t.stop()}}),t)}))),function(t,e,n){return V.apply(this,arguments)}),user:function(e){if(e===C||"id"===e)return p(C,Y);if(e===q||"anonId"===e)return p(q,Y);var n=Y.getState("user");return e?t(n,e):n},reset:function(t){return new Promise((function(e){pt.dispatch({type:J.resetStart},e,t)}))},ready:function(t){return Y.on(J.ready,t)},on:function(t,e){if(!t||!n(e))return!1;if(t===J.bootstrap)throw new Error(".on disabled for "+t);var r=/Start$|Start:/;if("*"===t){var o=function(t){return function(t){return function(n){return n.type.match(r)&&e({payload:n,instance:Y,plugins:y}),t(n)}}},i=function(t){return function(t){return function(n){return n.type.match(r)||e({payload:n,instance:Y,plugins:y}),t(n)}}};return k(o,ge),k(i,ye),function(){_(o,ge),_(i,ye)}}var a=t.match(r)?ge:ye,u=function(n){return function(n){return function(r){return r.type===t&&e({payload:r,instance:Y,plugins:y,abort:N}),n(r)}}};return k(u,a),function(){return _(u,a)}},once:function(t,e){if(!t||!n(e))return!1;if(t===J.bootstrap)throw new Error(".once disabled for "+t);var r=Y.on(t,(function(t){var n=t.payload;e({payload:n,instance:Y,plugins:y,abort:N}),r()}));return r},getState:function(e){var n=pt.getState();return e?t(n,e):Object.assign({},n)},dispatch:function(t){var e=r(t)?{type:t}:t;if(X(e.type))throw new Error("reserved action "+e.type);var n=t._||{},o=P(P({},e),{},{_:P({originalAction:e.type},n)});pt.dispatch(o)},enablePlugin:W.enable,disablePlugin:W.disable,plugins:W,storage:{getItem:f.getItem,setItem:function(t,e,n){pt.dispatch({type:J.setItemStart,key:t,value:e,options:n})},removeItem:function(t,e){pt.dispatch({type:J.removeItemStart,key:t,options:e})}},setAnonymousId:function(t,e){Y.storage.setItem(R,t,e)},events:{all:w,core:$,plugins:v}},H=function(t){return function(t){return function(e){return e.meta||(e.meta=de()),t(e)}}},rt=s.middlewares.concat([H,j(ge),Lt(Y,E,{all:w,plugins:v}),zt(f),Z(Y),nt(Y),j(ye)]),ot={context:ne,user:K(f),page:te,track:Ft,plugins:Ut(E),queue:$t},it=D,at=D;if(e&&o.debug){var ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;ct&&(it=ct({trace:!0,traceLimit:25})),at=function(){return 0===arguments.length?ue():a(x(arguments[0]))?ce():ce().apply(null,arguments)}}var st=oe(o),lt=s.pluginsArray.reduce((function(t,e){var n=e.name,r=e.config,o=e.loaded,i=s.pluginEnabled[n];return t[n]={enabled:i,initialized:!!i&&Boolean(!e.initialize),loaded:Boolean(o()),config:r||{}},t}),{}),ft={context:st,user:z,plugins:lt},pt=L(M(P(P({},ot),i)),ft,at(it(U.apply(void 0,b(rt)))));function dt(t){return function(e,n,r){var o=de(e.meta,n,se(r)),i=P(P({},e),{meta:o});return t.apply(null,[i])}}pt.dispatch=dt(pt.dispatch);var ht=Object.keys(y);pt.dispatch({type:J.bootstrap,plugins:ht,config:st,params:A,user:z,initialUser:u,persistedUser:T});var gt=ht.filter((function(t){return s.pluginEnabled[t]})),yt=ht.filter((function(t){return!s.pluginEnabled[t]}));function vt(t){return function(){for(var e=Array.prototype.slice.call(arguments),n=new Array(t.length),r=0;r<e.length;r++)n[r]=e[r];return n[n.length]=Y,t.apply({instance:Y},n)}}return pt.dispatch({type:J.registerPlugins,plugins:ht,enabled:s.pluginEnabled}),s.pluginsArray.map((function(t,e){var r=t.bootstrap,o=t.config,i=t.name;r&&n(r)&&r({instance:Y,config:o,payload:t}),pt.dispatch({type:J.registerPluginType(i),name:i,enabled:s.pluginEnabled[i],plugin:t}),s.pluginsArray.length===e+1&&pt.dispatch({type:J.initializeStart,plugins:gt,disabled:yt})})),ae((function(t){pt.dispatch({type:t?J.offline:J.online})})),ut(pt,E,Y),Y}var ge="before",ye="after",ve=xe(),me=Se,be=Se;function we(t){return ve?Se(t,"",-1):g(t)}function xe(){if(typeof ve!==p)return ve;try{Se(p,"1"),ve=-1!==document.cookie.indexOf(p),we(p)}catch(t){ve=!1}return ve}function Se(t,e,n,r,o,i){if(typeof window!==p){var a=arguments.length>1;return ve||(a?h(t,e):d(t)),a?document.cookie=t+"="+encodeURIComponent(e)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+t+"=")[1]||"").split(";")[0])}}var Ee=Ie();function Ie(){if(typeof Ee!==p)return Ee;Ee=!0;try{typeof localStorage!==p&&typeof JSON!==p||(Ee=!1),localStorage.setItem(p,p),localStorage.removeItem(p)}catch(t){Ee=!1}return Ee}function Oe(t){var e=t;try{if("true"===(e=JSON.parse(t)))return!0;if("false"===e)return!1;if(a(e))return e;parseFloat(e)===e&&(e=parseFloat(e))}catch(n){}if(null!==e&&""!==e)return e}var ke=Ie(),Pe=xe();function _e(t,e){if(t){var n=je(e),r=!Te(n),i=Ne(n)?Oe(localStorage.getItem(t)):void 0;if(r&&!o(i))return i;var a=Ae(n)?Oe(me(t)):void 0;if(r&&a)return a;var u=d(t);return r?u:{localStorage:i,cookie:a,global:u}}}function je(t){return t?r(t)?t:t.storage:"any"}function Ne(t){return ke&&Le(t,"localStorage")}function Ae(t){return Pe&&Le(t,"cookie")}function Te(t){return"*"===t||"all"===t}function Le(t,e){return"any"===t||t===e||Te(t)}var ze={setItem:function(t,e,n){if(t&&!o(e)){var r={},i=je(n),a=JSON.stringify(e),u=!Te(i);return Ne(i)&&(r.localStorage={location:"localStorage",current:e,previous:Oe(localStorage.getItem(t))},localStorage.setItem(t,a),u)?r.localStorage:Ae(i)&&(r.cookie={location:"cookie",current:e,previous:Oe(me(t))},be(t,a),u)?r.cookie:(r.global={location:"global",current:e,previous:d(t)},h(t,e),u?r.global:r)}},getItem:_e,removeItem:function(t,e){if(t){var n=je(e),r=_e(t,"*"),i={};return!o(r.localStorage)&&Ne(n)&&(localStorage.removeItem(t),i.localStorage=r.localStorage),!o(r.cookie)&&Ae(n)&&(we(t),i.cookie=r.cookie),!o(r.global)&&Le(n,"global")&&(g(t),i.global=r.global),i}}};var Me=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ue=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(n,!0).forEach((function(e){Me(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t};function Ce(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={storage:ze};return he(Ue(Ue({},e),t))}export{Ce as Analytics,G as CONSTANTS,J as EVENTS,Ce as default,Ce as init};
